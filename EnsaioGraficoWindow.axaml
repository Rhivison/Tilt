<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:lvc="using:LiveChartsCore.SkiaSharpView.Avalonia"
        xmlns:local="clr-namespace:TiltMachine"
        x:Class="TiltMachine.EnsaioGraficoWindow"
        x:DataType="local:EnsaioGraficoWindow"
        Title="Detalhes do Ensaio"
        Width="1000"
        Height="700"
        Icon="/Assets/chart-icon.png"
        WindowStartupLocation="CenterScreen">

  <Grid RowDefinitions="Auto,*,Auto">

    <!-- Cabeçalho -->
    <StackPanel Orientation="Vertical" Margin="20">
      
      <!-- Título + Botão -->
      <Grid ColumnDefinitions="*,Auto" Margin="0 0 0 10">
        <TextBlock Text="Informações do Ensaio"
                   FontSize="20"
                   FontWeight="Bold"
                   VerticalAlignment="Center"/>
        <Button Grid.Column="1"
                Content="Exportar PDF"
                Click="OnExportarPdfClick"
                Margin="10,0,0,0"
                Padding="10,5"
                HorizontalAlignment="Right"/>
      </Grid>

      <!-- Linha principal de infos -->
      <Grid ColumnDefinitions="2*,2*,2*,2*,2*"
            Margin="0 0 0 10">
        <TextBlock Grid.Column="0" Text="Amostra:" FontWeight="Bold"/>
        <TextBlock Grid.Column="0" Margin="70,0,0,0" Text="{Binding Ensaio.Amostra}"/>

        <TextBlock Grid.Column="1" Text="Nº:" FontWeight="Bold"/>
        <TextBlock Grid.Column="1" Margin="30,0,0,0" Text="{Binding Ensaio.AmostraNumero}"/>

        <TextBlock Grid.Column="2" Text="Local:" FontWeight="Bold"/>
        <TextBlock Grid.Column="2" Margin="60,0,0,0" Text="{Binding Ensaio.Local}"/>

        <TextBlock Grid.Column="3" Text="Responsável:" FontWeight="Bold"/>
        <TextBlock Grid.Column="3" Margin="110,0,0,0" Text="{Binding Ensaio.Responsavel}"/>

        <TextBlock Grid.Column="4" Text="Data:" FontWeight="Bold"/>
        <TextBlock Grid.Column="4" Margin="50,0,0,0" Text="{Binding Ensaio.DataEnsaio}"/>
      </Grid>

      <!-- Dados técnicos -->
      <UniformGrid Columns="3" Rows="2" Margin="0 10 0 0">
        <StackPanel>
          <TextBlock Text="Tipo de Rocha:" FontWeight="Bold"/>
          <TextBlock Text="{Binding Ensaio.TipoRocha}"/>
        </StackPanel>
        <StackPanel>
          <TextBlock Text="Formato do Corpo de Prova:" FontWeight="Bold"/>
          <TextBlock Text="{Binding Ensaio.FormatoCorpoProva}"/>
        </StackPanel>
        <StackPanel>
          <TextBlock Text="Altura:" FontWeight="Bold"/>
          <TextBlock Text="{Binding Ensaio.Altura}"/>
        </StackPanel>
        <StackPanel>
          <TextBlock Text="Largura:" FontWeight="Bold"/>
          <TextBlock Text="{Binding Ensaio.Largura}"/>
        </StackPanel>
        <StackPanel>
          <TextBlock Text="Profundidade:" FontWeight="Bold"/>
          <TextBlock Text="{Binding Ensaio.Profundidade}"/>
        </StackPanel>
        <StackPanel>
          <TextBlock Text="Área de Contato:" FontWeight="Bold"/>
          <TextBlock Text="{Binding Ensaio.AreaContato}"/>
        </StackPanel>
      </UniformGrid>
    </StackPanel>

    <!-- Gráfico -->
    <Border Grid.Row="1" Margin="20" BorderBrush="#ccc" BorderThickness="1" CornerRadius="6">
      <lvc:CartesianChart x:Name="chart"
                          XAxes="{Binding XAxes}"
                          YAxes="{Binding YAxes}"
                          Series="{Binding ChartSeries}"
                          LegendPosition="Bottom"
                          Background="White"/>
    </Border>

    <!-- Rodapé -->
    <StackPanel Grid.Row="2" Margin="20" Orientation="Vertical" Spacing="10">
      <TextBlock Text="Observações" FontWeight="Bold"/>
      <TextBlock Text="{Binding Ensaio.Observacoes}" TextWrapping="Wrap"/>
    </StackPanel>

  </Grid>
</Window>
